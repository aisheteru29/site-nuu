<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Сайт с Яндекс Навигатором</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://api-maps.yandex.ru/2.1/?apikey=8e052adf-4944-44f7-a471-5dff85304d55&lang=ru_RU" type="text/javascript"></script>
</head>
<body>
  <header>
    <nav class="navbar">
      <h1 class="logo">МойСайт</h1>
      <ul class="nav-links">
        <li><a href="#home">Главная</a></li>
        <li><a href="#about">О нас</a></li>
        <li><a href="#services">Услуги</a></li>
        <li><a href="#map">Навигатор</a></li>
        <li><a href="#contact">Контакты</a></li>
      </ul>
    </nav>
  </header>

  <section id="home">
    <h2>Добро пожаловать!</h2>
    <p>Это сайт с Яндекс-картой и навигацией.</p>
  </section>

  <section id="about">
    <h2>О нас</h2>
    <p>Мы крутая компания. Убедись сам!</p>
  </section>

  <section id="services">
    <h2>Наши услуги</h2>
    <p>От хлеба до навигации — всё под рукой!</p>
  </section>

  <section id="map">
    <h2>Навигатор</h2>
    <p>Введите адрес назначения:</p>
    <input type="text" id="destinationInput" placeholder="Например: Арбат, Москва" />
    <button onclick="buildRoute()">Построить маршрут</button>
    <div id="map-container"></div>
  </section>

  <section id="contact">
    <h2>Контакты</h2>
    <p>Email: example@email.com</p>
  </section>

  <footer>
    <p>© 2025 МойСайт. Все права защищены.</p>
  </footer>

  <script>
    ymaps.ready(init);
    let myMap, userCoords;

    function init() {
      myMap = new ymaps.Map("map-container", {
        center: [55.75, 37.57],
        zoom: 10
      });

      ymaps.geolocation.get().then(function (res) {
        userCoords = res.geoObjects.position;
        myMap.setCenter(userCoords, 14);
        myMap.geoObjects.add(new ymaps.Placemark(userCoords, { balloonContent: "Вы здесь" }, { preset: "islands#blueDotIcon" }));
      });
    }

    function buildRoute() {
      const destinationAddress = document.getElementById("destinationInput").value;
      if (!destinationAddress) {
        alert("Введите адрес.");
        return;
      }

      ymaps.geocode(destinationAddress).then(function (res) {
        const firstGeoObject = res.geoObjects.get(0);
        const destinationCoords = firstGeoObject.geometry.getCoordinates();

        if (!userCoords) {
          alert("Не удалось определить ваше местоположение.");
          return;
        }

        const multiRoute = new ymaps.multiRouter.MultiRoute({
          referencePoints: [userCoords, destinationCoords],
          params: {
            routingMode: 'auto'
          }
        }, {
          boundsAutoApply: true
        });

        myMap.geoObjects.removeAll();
        myMap.geoObjects.add(multiRoute);
      });
    }
  </script>
</body>
</html>
